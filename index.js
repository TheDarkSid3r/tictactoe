var e=(e,a)=>{var t=["#5E9967"],r=[["#994749","X"],["#2B719A","O"]],n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],o=$(".top-wrapper");t=$("<div/>").addClass("board").appendTo(document.body);anime.set(t[0],{translateX:"-50%",translateY:"-50%"});var s=new Array(9).fill(!0).map((e,a)=>{var r=$("<div/>").addClass("board-square").appendTo(t).on("click",()=>v(a));return a%3==2&&a<8&&$("<br/>").appendTo(t),r}),i=new Array(9).fill(!1),l=[],d=()=>{var e=[2*o.outerHeight()+20,20,20,20],a=$(window),r=Math.min((a.width()-(e[1]+e[3]))/t.width(),(a.height()-(e[0]+e[2]))/t.height());anime.set(t[0],{scale:r})};d(),setTimeout(()=>d(),200),$(window).on("resize",()=>d());var u=!0,m=(a,n)=>{var o=r[n],i=s[a].addClass("disabled"),d=$("<div/>").addClass("board-piece").html(o[1]).css({color:o[0]}).appendTo(i);l[a]=d,anime.set(d[0],{translateX:"-50%",translateY:"-50%"}),anime({targets:d[0],scale:[0,1],duration:1e3,easing:"easeOutElastic"}),t[(u=n!=e)?"removeClass":"addClass"]("disabled"),h(!u)},c=a=>(u=!1,t.addClass("disabled"),console.log(a),"tie"==a.r?p("It’s a tie!","#FFFFFF"):(p(a.w==e?"You win!":"Opponent wins!",r[a.w][0]),a.i.forEach(e=>{var t=r[a.w][0];s[e].css({backgroundColor:"".concat(t,4==t.length?"3":"33")});var n=l[e];anime({targets:n[0],scale:1.2,easing:"easeInOutQuart",duration:400,complete:()=>{var e=()=>{anime({targets:n[0],scale:1.1,easing:"easeInQuart",duration:400,complete:()=>{anime({targets:n[0],scale:1.2,easing:"easeOutQuart",duration:400,complete:()=>e()})}})};e()}})})),!0),g=()=>{var t=e=>n.some(a=>a.every(a=>i[a]===e)),r=t(e)?e:t(a)?a:null;return null!=r?c({r:"win",w:r,i:n.find(e=>e.every(e=>i[e]===r))}):i.some(e=>!1===e)?void 0:c({r:"tie"})},v=t=>{if(u&&!1===i[t]){m(t,e),i[t]=e;var r=t;g()||setTimeout(()=>{console.log("---");var t=n.some(a=>{var t=a.some(a=>i[a]===e);if(t){var n=a.filter(a=>i[a]===e).length;return console.log(r,a,n),n>1&&n}return t}),o=new Array(9).fill(!0).map((e,a)=>a).filter(e=>!1===i[e]);if(t){console.log("hasUpcomingWin");var s=n.filter(t=>{if(t.some(a=>i[a]===e)){if(t.some(e=>i[e]===a))return!1;var r=t.filter(a=>i[a]===e).length;if(r>1)return r}return!1});console.log(s),s.length&&(o=s[Math.floor(Math.random()*s.length)])}var l=o.filter(e=>!1===i[e]),d=l[Math.floor(Math.random()*l.length)];m(d,a),i[d]=a,g()},400)}},p=(e,a)=>{var t=$(".top-text");anime({targets:t[0],translateY:"-150%",duration:200,easing:"easeInQuart",complete:()=>{anime({targets:t.html(e).css({color:a})[0],translateY:"0%",duration:200,easing:"easeOutQuart",complete:()=>d()}),d()}})},h=t=>{p(t?"It’s your opponent’s turn!":"It’s your turn!",r[t?a:e][0])};h()},a=Math.floor(2*Math.random());e(a,a?0:1);